@page "/"
@inject SpeedtestRunner.Data.AppDbContext DbContext

<MainLayout OnTestRun="@StateHasChanged">

    <div class="row mt-1 mb-1">
        <div class="col-sm-10">
            <h1 class="display-4">Results</h1>
        </div>
    </div>

    <div class="row mt-1 mb-1">
        <div class="col-sm-12">
            <table class="table table-striped table-borderless">
                <thead>
                    <tr>
                        <th scope="col">Timestamp</th>
                        <th scope="col">Latency (ms)</th>
                        <th scope="col">Download (Mbps)</th>
                        <th scope="col">Upload (Mbps)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var test in DbContext.Speedtests.OrderByDescending(s => s.Timestamp))
                    {
                        <tr>
                            <td>@test.Timestamp.ToString()</td>
                            <td>@test.ServerLatency</td>
                            <td>@($"{test.DownloadSpeed / 1000:F}")</td>
                            <td>@($"{test.UploadSpeed / 1000:F}")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

</MainLayout>
